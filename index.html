
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calculateur HECATE II - BRM5</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background-color: #2b2f30;
      color: #d2f7ce;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      line-height: 1.6;
    }
    h1, h2, h3 {
      color: #a8ff60;
      text-align: center;
    }
    .logo-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #3a3f40;
      padding: 1rem;
      border: 1px solid #3aff83;
      border-radius: 10px;
      margin-bottom: 2rem;
    }
    .logo-container img {
      height: 60px;
    }
    label {
      display: block;
      margin-top: 1rem;
      color: #d2f7ce;
    }
    input, select, button {
      width: 100%;
      padding: 0.6rem;
      margin-top: 0.3rem;
      font-size: 1rem;
      border-radius: 5px;
    }
    input, select {
      background-color: #2d2d2d;
      color: #c0f0c0;
      border: 1px solid #3aff83;
    }
    button {
      background-color: #3aff83;
      color: #1e1e1e;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    .result, .historique {
      margin-top: 1.5rem;
      padding: 1rem;
      background-color: #2e3335;
      border: 1px solid #3aff83;
      border-radius: 5px;
    }
    ul#historique {
      list-style: none;
      padding-left: 1rem;
    }
    ul#historique li::before {
      content: "üìç ";
    }
  </style>
</head>
<body>
  <div class="logo-container">
    <img src="images/brm5_logo.png" alt="Logo BRM5">
    <h1>Calculateur HECATE II</h1>
    <img src="images/platinumfive_logo.png" alt="Logo PlatinumFive">
  </div>

  <label for="mils">Taille de l'ennemi dans la lunette (en mils) :</label>
  <input type="range" min="5" max="20" step="0.1" value="10" id="milsSlider" oninput="updateSliderValue(this.value)">
  <input type="number" id="mils" step="0.1" value="10">

  <label for="targetSize">Type de cible :</label>
  <select id="targetSize">
    <option value="180">Pleine hauteur (180 cm)</option>
    <option value="100">Torse (100 cm)</option>
    <option value="50">T√™te (50 cm)</option>
    <option value="40">Genou (40 cm)</option>
  </select>

  <button onclick="calculer()">Calculer</button>

  <div class="result" id="resultat"></div>

  <h3>üìú Historique des calculs :</h3>
  <ul class="historique" id="historique"></ul>

  <script>
    function updateSliderValue(val) {
      document.getElementById("mils").value = val;
    }

    function calculer() {
      const mils = parseFloat(document.getElementById("mils").value);
      const target_cm = parseFloat(document.getElementById("targetSize").value);
      const resultDiv = document.getElementById("resultat");
      const historyDiv = document.getElementById("historique");

      if (isNaN(mils) || mils <= 0) {
        resultDiv.innerHTML = "<p>‚ùå Veuillez entrer une valeur valide en mils.</p>";
        return;
      }

      const target_mm = target_cm * 10;
      const distance_m = (target_mm * 1000) / mils / 1000;
      const dist = distance_m.toFixed(1);
      let hold = 0;
      let zone = "";

      if (distance_m < 50) hold = -0.25;
      else if (distance_m < 100) hold = -0.2;
      else if (distance_m < 150) hold = -0.1;
      else if (distance_m < 200) hold = -0.05;
      else if (distance_m <= 200) hold = 0;
      else if (distance_m <= 300) hold = 0.6;
      else if (distance_m <= 400) hold = 1.3;
      else if (distance_m <= 500) hold = 2.0;
      else hold = 3.0;

      if (hold === 0) {
        zone = "üëâ Vise le point central (croix)";
      } else if (Math.abs(hold) < 1) {
        const sens = hold < 0 ? "plus bas" : "plus haut";
        zone = `üëâ Vise ${Math.abs(hold).toFixed(2)} mils ${sens}`;
      } else {
        zone = `üëâ Vise la ligne ${hold.toFixed(1)} mils sous la croix`;
      }

      resultDiv.innerHTML = `
        <p>üìè <strong>Distance estim√©e :</strong> ${dist} m√®tres</p>
        <p>${zone}</p>
      `;

      const histEntry = document.createElement("li");
      histEntry.innerText = `üìè ${dist} m ‚Üí ${zone.replace(/üëâ /g, "")}`;
      historyDiv.appendChild(histEntry);
    }
  </script>
</body>
</html>
